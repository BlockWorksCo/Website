<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="Call me Sam, a theme for Hugo.">

<meta name="twitter:card" content="summary">
<meta name="twitter:domain" content="http://BlockWorks.co/">

<meta name="twitter:image" content="http://BlockWorks.co/tn.png">
<meta name="twitter:title" property="og:title" itemprop="title name" content="BlockWorks Co">
<meta name="twitter:description" property="og:description" itemprop="description" content="Call me Sam, a theme for Hugo.">
<meta name="og:type" content="website">
<meta name="og:url" content="http://BlockWorks.co/">
<meta name="og:image" itemprop="image primaryImageOfPage" content="http://BlockWorks.co/tn.png">

<link rel="shortcut icon" href="http://BlockWorks.co/favicon.ico" id="favicon">
<link rel="stylesheet" href="http://BlockWorks.co/css/style.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">


    

    
    
    
    <title>
        
        Debugging Hard Faults
        
    </title>
</head>

<body>
    <div class="wrap">
        <div class="section" id="title">Debugging Hard Faults</div>

        
<div class="section" id="content">
    Fri Mar 01, 2019 &#183; 195 words
    
    <hr/>
    <p>A lot of developers are afraid of hard-faults or exceptions happening in
their software, but they don&rsquo;t need to be. Quite often, (though not always)
they can be relatively easy problems to solve precisely because the hardware
has frozen the machine state at the exact point the problem occurred.</p>

<p>What do we mean by machine-state?</p>

<p>two stacks</p>

<p>Cortex-M example bug other architectures are similar.</p>

<pre><code>
vois HardFault_Handler()
{
#ifdef DEBUG

   // In debug mode, put a breakpoint on here, 
   // disable the watchdog allowing you opportunity
   // to debug te problem.
   volatile bool   returnFromHere  = false;
   while( returnFromHere == false );

   // return from here by setting the flag to 
   // escape the loop
   // under the control of the debugger.
   // Returning will switch stacks back to the 
   // user-mode at which point you can examine the 
   // entire machine-state such as the call stack.

#else
   // Capture machine state

   // Store machine state in a 'noinit' area of RAM.

   // Sit in a tight loop, waiting for the watchdog 
   // to kick in.

   // On startup, check the 'noinit' area for stored
   // crash data and
   // send it as an event.
#endif
}

</code></pre>

</div>


        
<div class="section bottom-menu">
    
<hr />
<p>


    
        <a href="/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="/posts">
                Articles
            </a>
        
    
    
        
            &#183; 
            <a href="/about">
                Who am I?
            </a>
        
    
    &#183; 
    <a href="http://BlockWorks.co/">
        
    </a>

</p>
</div>


        <div class="section footer"><a href="http://BlockWorks.co">BlockWorks.co</a>, an embedded software consultancy</div>
    </div>
</body>

</html>